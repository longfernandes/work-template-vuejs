<template>
    <header class="border-b bg-white shadow-md py-4 sticky top-0 z-50">
        <div
            class="flex justify-between items-center px-5 py-4 max-w-[1800px] mx-auto"
        >
            <!-- Logo -->
            <div class="flex items-center gap-2 cursor-pointer">
                <img
                    src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRAGiipyZpkYEv_RKfoOsdIoaoksBMT8PybPg&s"
                    alt="Logo"
                    class="w-20 h-15"
                />
                <div>
                    <RouterLink to="/" class="text-2xl font-bold"
                        >TH·∫æ GI·ªöI TH·ªÇ THAO</RouterLink
                    >
                    <div class="text-lg font-bold text-gray-500">24/7</div>
                </div>
            </div>

            <!-- Search -->
            <div
                class="hidden md:flex items-center border rounded-full px-4 py-1 w-[800px]"
            >
                <input
                    type="text"
                    placeholder="B·∫°n c·∫ßn t√¨m g√¨?"
                    class="flex-1 outline-none bg-transparent placeholder-gray-400"
                />
            </div>

            <!-- Info -->
            <div
                class="hidden md:flex items-center font-semibold gap-10 text-xl text-black"
            >
                <div class="flex items-center gap-1 cursor-pointer">
                    üë§
                    <span v-if="user" class="hover:underline">{{
                        user.username
                    }}</span>
                    <RouterLink v-else to="/login" class="hover:underline"
                        >ƒêƒÉng nh·∫≠p</RouterLink
                    >
                </div>

                <div class="flex items-center gap-2">‚ù§Ô∏è <span>0</span></div>
                <RouterLink
                    to="/cart"
                    class="relative flex items-center gap-1 cursor-pointer"
                >
                    üõí
                    <span
                        v-if="totalQuantity > 0"
                        class="absolute -top-2 -right-2 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center"
                    >
                        {{ totalQuantity }}
                    </span>
                </RouterLink>
            </div>

            <!-- Mobile menu button -->
            <button @click="toggleMenu" class="md:hidden text-3xl">‚ò∞</button>
        </div>

        <!-- Desktop Menu -->
        <nav
            class="hidden md:flex justify-center gap-10 py-3 font-semibold text-xl text-black"
        >
            <RouterLink to="/" class="hover:text-orange-500 hover:underline"
                >S·∫£n ph·∫©m</RouterLink
            >

            <!-- Dropdown Gi√†y b√≥ng ƒë√° -->
            <a-dropdown>
                <a class="hover:text-orange-500 cursor-pointer"
                    >Gi√†y th·ªÉ thao ‚ñº</a
                >
                <template #overlay>
                    <a-menu>
                        <a-menu-item
                            ><RouterLink to="/allsport"
                                >T·∫•t c·∫£ s·∫£n ph·∫©m</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/natural"
                                >Gi√†y b√≥ng ƒë√° s√¢n c·ªè</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/artificial"
                                >Gi√†y b√≥ng ƒë√° s√¢n nh√¢n t·∫°o
                            </RouterLink></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/cheaper"
                                >Gi√†y b√≥ng ƒë√° r·∫ª</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/expensive"
                                >Gi√†y b√≥ng ƒë√° x·ªãn</RouterLink
                            ></a-menu-item
                        >
                    </a-menu>
                </template>
            </a-dropdown>

            <!-- Dropdown Th∆∞∆°ng hi·ªáu -->
            <a-dropdown>
                <a class="hover:text-orange-500 cursor-pointer"
                    >Th∆∞∆°ng hi·ªáu ‚ñº</a
                >
                <template #overlay>
                    <a-menu>
                        <a-menu-item
                            ><RouterLink to="allstar"
                                >T·∫•t c·∫£ s·∫£n ph·∫©m</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/puma"
                                >Puma</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/mizuno"
                                >Mizuno</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/adidas"
                                >Adidas</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/puma"
                                >Nike</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/nike"
                                >Kamito</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/zocker"
                                >Zocker</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/wika"
                                >Wika</RouterLink
                            ></a-menu-item
                        >
                    </a-menu>
                </template>
            </a-dropdown>

            <!-- Dropdown Ph·ª• ki·ªán -->
            <a-dropdown>
                <a class="hover:text-orange-500 cursor-pointer">Ph·ª• ki·ªán ‚ñº</a>
                <template #overlay>
                    <a-menu>
                        <a-menu-item
                            ><RouterLink to="/tat">T·∫•t</RouterLink></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/balo"
                                >Balo</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/goalkeep"
                                >GƒÉng tay th·ªß m√¥n</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/shirt"
                                >Qu·∫ßn √°o ƒë√° b√≥ng</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/ball"
                                >Qu·∫£ b√≥ng ƒë√°</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/ongdong"
                                >B·ªçc ·ªëng ƒë·ªìng</RouterLink
                            ></a-menu-item
                        >
                    </a-menu>
                </template>
            </a-dropdown>

            <!-- Dropdown D·ªãch v·ª• -->
            <a-dropdown>
                <a class="hover:text-orange-500 cursor-pointer">D·ªãch v·ª• ‚ñº</a>
                <template #overlay>
                    <a-menu>
                        <a-menu-item
                            ><RouterLink to="/bao-hanh"
                                >B·∫£o h√†nh</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/tra-hang"
                                >ƒê·ªïi tr·∫£</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/tra-hang"
                                >ƒê·ªïi tr·∫£</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/tra-hang"
                                >ƒê·ªïi tr·∫£</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/tra-hang"
                                >ƒê·ªïi tr·∫£</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/tra-hang"
                                >ƒê·ªïi tr·∫£</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/tra-hang"
                                >ƒê·ªïi tr·∫£</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/tra-hang"
                                >ƒê·ªïi tr·∫£</RouterLink
                            ></a-menu-item
                        >
                    </a-menu>
                </template>
            </a-dropdown>

            <!-- Dropdown H∆∞·ªõng d·∫´n -->
            <a-dropdown>
                <a class="hover:text-orange-500 cursor-pointer">H∆∞·ªõng d·∫´n ‚ñº</a>
                <template #overlay>
                    <a-menu>
                        <a-menu-item
                            ><RouterLink to="/huong-dan-size"
                                >Ch·ªçn size</RouterLink
                            ></a-menu-item
                        >
                        <a-menu-item
                            ><RouterLink to="/huong-dan-mua"
                                >C√°ch mua h√†ng</RouterLink
                            ></a-menu-item
                        >
                    </a-menu>
                </template>
            </a-dropdown>
        </nav>

        <!-- Mobile menu -->
        <nav
            v-if="showMenu"
            class="md:hidden flex flex-col gap-3 px-6 py-4 font-semibold text-lg bg-white shadow-md border-t"
        >
            <RouterLink @click="closeMenu" to="/">S·∫£n ph·∫©m</RouterLink>
            <RouterLink @click="closeMenu" to="/kamito"
                >Gi√†y b√≥ng ƒë√°</RouterLink
            >
            <RouterLink @click="closeMenu" to="/wika">Th∆∞∆°ng hi·ªáu</RouterLink>
            <RouterLink @click="closeMenu" to="/nike">Ph·ª• ki·ªán</RouterLink>
            <RouterLink @click="closeMenu" to="/adidas">D·ªãch v·ª•</RouterLink>
            <RouterLink @click="closeMenu" to="/mizuno">H∆∞·ªõng d·∫´n</RouterLink>
        </nav>
    </header>
</template>

<script setup>
import { ref, computed } from "vue";
import { RouterLink } from "vue-router";
import { useCartStore } from "../stores/cartStore";

// ant-design-vue
import {
    Dropdown as ADropdown,
    Menu as AMenu,
    MenuItem as AMenuItem,
} from "ant-design-vue";

const cartStore = useCartStore();
const showMenu = ref(false);

const toggleMenu = () => {
    showMenu.value = !showMenu.value;
};

const closeMenu = () => {
    showMenu.value = false;
};

const totalQuantity = computed(() =>
    cartStore.items.reduce((total, item) => total + item.quantity, 0)
);
</script>
